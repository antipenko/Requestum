function showProducts(){$(".hide").fadeIn(500),$(".hide").removeClass("hide")}function loadProducts(page){var xhr=new XMLHttpRequest;xhr.open("GET","list.php?page="+page+"&per_page=4",!0),xhr.send(),preload.style.display="block",btnLoadProducts.innerHTML="loading...",btnLoadProducts.disabled=!0,xhr.onreadystatechange=function(){if(200!=xhr.status)console.log(xhr.status+": "+xhr.statusText);else if(4==xhr.readyState){var productInfo=xhr.responseText,obj=JSON.parse(productInfo);0==obj.entities.length&&(btnLoadProducts.className="hide"),setTimeout(function(){for(var i=0;5>i;i++){var product=document.createElement("li");product.classList.add("product-wrapper","hide"),markupProduct(product,obj.entities[i]),productList.appendChild(product)}console.log(obj.total)},1e3)}preload.style.display="none",btnLoadProducts.innerHTML="Load more",btnLoadProducts.disabled=!1},productPage++}function setAttributes(el,attrs){for(var key in attrs)el.setAttribute(key,attrs[key])}function markupProduct(product,obj){var productDiv=document.createElement("div");setAttributes(productDiv,{"class":"product"});var productLink=document.createElement("a");setAttributes(productLink,{href:"#","class":"product_link"});var productImg=document.createElement("img");setAttributes(productImg,{src:obj.img,"class":"product_img",alt:obj.title});var productTitle=document.createElement("h1");setAttributes(productTitle,{"class":"product_title"}),productTitle.innerHTML=obj.title,productLink.appendChild(productImg),productLink.appendChild(productTitle);var productDescription=document.createElement("p");setAttributes(productDescription,{"class":"product_description"}),productDescription.innerHTML=obj.description;var productPrice=document.createElement("div");productPrice.classList.add("product-price");var productPriceMain=document.createElement("span");productPriceMain.classList.add("product-price__main");var productPriceOld=document.createElement("del");productPriceOld.classList.add("product-price__old"),null!==obj.discountCost?(productPriceMain.innerHTML="$"+obj.discountCost,productPriceOld.innerHTML="$"+obj.cost,productPrice.appendChild(productPriceMain),productPrice.appendChild(productPriceOld)):(productPriceMain.innerHTML="$"+obj.cost,productPrice.appendChild(productPriceMain));var productLabelSale=document.createElement("span");productLabelSale.classList.add("product-label","product-label_sale"),productLabelSale.innerHTML="sale";var productLabelNew=document.createElement("span");productLabelNew.classList.add("product-label","product-label_new"),productLabelNew.innerHTML="new";var productButton=document.createElement("p");productButton.classList.add("product-buttons");var productButtonAdd=document.createElement("button");productButtonAdd.classList.add("button","button-add"),productButtonAdd.innerHTML="add";var productButtonView=document.createElement("button");productButtonView.classList.add("button","button-view"),productButtonView.innerHTML="view",productButton.appendChild(productButtonAdd),productButton.appendChild(productButtonView),productDiv.appendChild(productLink),productDiv.appendChild(productDescription),productDiv.appendChild(productPrice),productDiv.appendChild(productButton),null!==obj.discountCost&&productDiv.appendChild(productLabelSale),obj.new!==!1&&productDiv.appendChild(productLabelNew),product.appendChild(productDiv)}function setEqualHeight(columns){var tallestcolumn=0;columns.each(function(){currentHeight=$(this).height(),console.log(currentHeight),currentHeight>tallestcolumn&&(tallestcolumn=currentHeight)}),columns.height(tallestcolumn)}var btnLoadProducts=document.getElementById("loadProducts"),productList=document.getElementById("products"),preload=document.getElementById("preloader"),productPage=2;window.onload=function(){loadProducts(productPage)},btnLoadProducts.onclick=function(){showProducts(),loadProducts(productPage)},btnLoadProducts.onclick=function(){showProducts(),loadProducts(productPage)},setEqualHeight($(".sidebar"));